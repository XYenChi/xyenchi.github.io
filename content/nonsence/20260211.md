---
title: "跟 Python 虚拟环境斗智斗勇"
date: "2026-02-11T00:00:03+00:00"
draft: false
---
近日我测试 pytorch 在 RISC-V 上有什么可以修的简单项。发现即便是在虚拟环境中 test/run_test.py 也会先找系统中的 pytorch。   
所以我对着旧版本 pytorch 的 fail 项修了半天不生效。   
虽然之前明明没有 LAPACK, sycl 但却进行测试，还有旧的函数调用等种种迹象都暗含可能测错，但我竟没有引起警惕。   
`export PYTHONPATH=$PWD` 之后终于正确了，之前 fail 的 test cpp extension 等模块竟然会在测试过程中没有的话就自动编译安装，于是
花费的时间大幅上升，`export MAX_JOBS=32` 竟然把机器给跑挂了，现在改成16继续测。   
与此同时我接到了 MLIR 相关通知，于是又开始在archlinux上打包 pytorch 2.8以免把虚拟环境中的2.11创烂。   
虽然可能有同时存在 2.8 和 2.11 随便我用的方法，但机器性能估计不足以维系，先使用 cross build。
