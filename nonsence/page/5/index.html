<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Nonsences | xyenchi's blog</title><meta name=keywords content><meta name=description content="Nonsences - xyenchi's blog"><meta name=author content="xyenchi"><link rel=canonical href=https://xyenchi.github.io/nonsence/><link crossorigin=anonymous href=/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css integrity="sha256-IhHKMWS+eDACT2qtKzouUghDpk+PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as=style><link rel=icon href=https://xyenchi.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xyenchi.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xyenchi.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://xyenchi.github.io/apple-touch-icon.png><link rel=mask-icon href=https://xyenchi.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://xyenchi.github.io/nonsence/index.xml><link rel=alternate hreflang=en href=https://xyenchi.github.io/nonsence/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://xyenchi.github.io/nonsence/"><meta property="og:site_name" content="xyenchi's blog"><meta property="og:title" content="Nonsences"><meta property="og:description" content="Record"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://xyenchi.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xyenchi.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Nonsences"><meta name=twitter:description content="Record"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Nonsences","item":"https://xyenchi.github.io/nonsence/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xyenchi.github.io/ accesskey=h title="xyenchi's blog (Alt + H)">xyenchi's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xyenchi.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://xyenchi.github.io/record/ title=Record><span>Record</span></a></li><li><a href=https://xyenchi.github.io/perf/ title=Perf><span>Perf</span></a></li><li><a href=https://xyenchi.github.io/note/ title=Note><span>Note</span></a></li><li><a href=https://xyenchi.github.io/nonsence/ title=Nonsence><span class=active>Nonsence</span></a></li><li><a href=https://xyenchi.github.io/novel/ title=Novel><span>Novel</span></a></li><li><a href=https://xyenchi.github.io/about/ title=About><span>About</span></a></li><li><a href=https://xyenchi.github.io/friends/ title=Friends><span>Friends</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Nonsences</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>only-riscv 分支的记录</h2></header><div class=entry-content><p>目前成功构建的 patch ：RISC-V: Fix VL operand bug in VSETVL PASS[PR110264]
此patchRISC-V: Bugfix for RVV integer reduction in ZVE32/64.构建失败，但是RISC-V: Fix one typo for reduc expand GET_MODE_CLASS可以修复。 中间夹杂了 RISC-V:Add float16 tuple type support ,此构建失败报：
../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ In file included from ../.././gcc/gcc/genemit.cc:25: ../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ In file included from ../.././gcc/gcc/genextract.cc:22: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ In file included from ../.././gcc/gcc/genemit.cc:22: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ In file included from ../.././gcc/gcc/genpeep.cc:25: ../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ In file included from ../.././gcc/gcc/rtl.cc:31: ../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ In file included from ../.././gcc/gcc/rtl.cc:28: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ In file included from ../.././gcc/gcc/genpeep.cc:22: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ In file included from ../.././gcc/gcc/genautomata.cc:111: ../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ In file included from ../.././gcc/gcc/genautomata.cc:108: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ g++ -c -g -O2 -DIN_GCC -DCROSS_DIRECTORY_STRUCTURE -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -DHAVE_CONFIG_H -DGENERATOR_FILE -I. -Ibuild -I../.././gcc/gcc -I../.././gcc/gcc/build -I../.././gcc/gcc/../include -I../.././gcc/gcc/../libcpp/include \ -o build/gensupport.o ../.././gcc/gcc/gensupport.cc In file included from ../.././gcc/gcc/genpreds.cc:27: ../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ In file included from ../.././gcc/gcc/genoutput.cc:90: ../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ In file included from ../.././gcc/gcc/genpreds.cc:24: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ In file included from ../.././gcc/gcc/genopinit.cc:25: ../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ In file included from ../.././gcc/gcc/genoutput.cc:87: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ In file included from ../.././gcc/gcc/genopinit.cc:22: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ In file included from ../.././gcc/gcc/genrecog.cc:112: ../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ make[2]: *** [Makefile:2825: build/genextract.o] Error 1 make[2]: *** Waiting for unfinished jobs.... In file included from ../.././gcc/gcc/genrecog.cc:109: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ In file included from ../.././gcc/gcc/genattrtab.cc:109: ../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ make[2]: *** [Makefile:2825: build/genpeep.o] Error 1 make[2]: *** [Makefile:2825: build/genemit.o] Error 1 In file included from ../.././gcc/gcc/genattrtab.cc:106: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ In file included from ../.././gcc/gcc/read-rtl.cc:34: ../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ In file included from ../.././gcc/gcc/read-rtl.cc:31: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ make[2]: *** [Makefile:2825: build/rtl.o] Error 1 make[2]: *** [Makefile:2825: build/genopinit.o] Error 1 make[2]: *** [Makefile:2825: build/genoutput.o] Error 1 make[2]: *** [Makefile:2825: build/genpreds.o] Error 1 make[2]: *** [Makefile:2825: build/read-rtl.o] Error 1 make[2]: *** [Makefile:2825: build/genrecog.o] Error 1 make[2]: *** [Makefile:2825: build/genattrtab.o] Error 1 make[2]: *** [Makefile:2825: build/genautomata.o] Error 1 In file included from ../.././gcc/gcc/gensupport.cc:24: ../.././gcc/gcc/rtl.h:316:31: warning: ‘rtx_def::mode’ is too small to hold all values of ‘enum machine_mode’ 316 | ENUM_BITFIELD(machine_mode) mode : 8; | ^~~~ In file included from ../.././gcc/gcc/gensupport.cc:21: ../.././gcc/gcc/rtl.h: In member function ‘long unsigned int subreg_shape::unique_id() const’: ../.././gcc/gcc/rtl.h:2160:37: error: static assertion failed: MAX_MACHINE_MODE &lt;= 256 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ ../.././gcc/gcc/rtl.h:2160:37: note: the comparison reduces to ‘(284 &lt;= 256)’ 2160 | { STATIC_ASSERT (MAX_MACHINE_MODE &lt;= 256); } ../.././gcc/gcc/system.h:850:19: note: in definition of macro ‘STATIC_ASSERT’ 850 | static_assert ((X), #X) | ^ make[2]: *** [Makefile:2825: build/gensupport.o] Error 1 可能是这俩的问题吧： Bump up precision size to 16 bits.
Machine_Mode: Extend machine_mode from 8 to 16 bits</p></div><footer class=entry-footer><span title='2024-04-22 11:30:03 +0000 UTC'>April 22, 2024</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;1365 words&nbsp;·&nbsp;xyenchi</footer><a class=entry-link aria-label="post link to only-riscv 分支的记录" href=https://xyenchi.github.io/nonsence/only-riscv-%E5%88%86%E6%94%AF%E7%9A%84%E8%AE%B0%E5%BD%95/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>办理业务踩的坑</h2></header><div class=entry-content><p>近日办理业务发现了一年前签合同和协议踩的坑，记录一下，以后也会新增累积，成为游刃有余的老油条。
总结以下几条：
1.条款内容前后文矛盾
2.暗改合同日期
3.更换业务内容只签补充协议且执行按照合同正文日期
虽然签十个合同办理业务才可能出现这一个案例，但涉及金额较大业务时需要更加谨慎。不过更希望大家不会碰到这些事。
具体内容：
1.条款1写 4.15 - 4.18 是免租期。条款2写租金从4.15开始收取。实际免租期是个幌子。
2.约定租期1年，但是合同起止时间写 4.15 - 4.30。
3.网络合同正文写 4.15 ，但是发现宽带不符合办公要求时，办理电信业务租赁线路签补充协议不注明日期，实际执行按照合同正文。</p></div><footer class=entry-footer><span title='2024-04-10 11:30:03 +0000 UTC'>April 10, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;19 words&nbsp;·&nbsp;xyenchi</footer><a class=entry-link aria-label="post link to 办理业务踩的坑" href=https://xyenchi.github.io/nonsence/%E5%8A%9E%E7%90%86%E4%B8%9A%E5%8A%A1%E8%B8%A9%E7%9A%84%E5%9D%91/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>重启每日废话</h2></header><div class=entry-content><p>天气雨
怎么还在摘樱桃。
发现想要根据报错来解决出现的问题的话就会出现本不该是 gcc 12 特性的 patch 被引入。
于是推倒重来，一个一个标记。
干的时候又很不耐烦，想要掏出脚本。不过还是不要太激进了，等编译的时候看看书。</p></div><footer class=entry-footer><span title='2024-04-02 11:30:03 +0000 UTC'>April 2, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;10 words&nbsp;·&nbsp;xyenchi</footer><a class=entry-link aria-label="post link to 重启每日废话" href=https://xyenchi.github.io/nonsence/20240402/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>继续移植gprofng</h2></header><div class=entry-content><p>天气晴。
早上到达武汉非常冷，发现了一个很中二的说法，回笼觉念成回龙决。
偷一个 /usr/include/sys/ucontext.h 出来观测，qemu 里面显示得太异常了。大佬告诉我这是 glibc 的内容。
/* struct ucontext definition, RISC-V version. Copyright (C) 1997-2023 Free Software Foundation, Inc. This file is part of the GNU C Library. The GNU C Library is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation; either version 2.1 of the License, or (at your option) any later version. The GNU C Library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the GNU Lesser General Public License along with the GNU C Library. If not, see &lt;https://www.gnu.org/licenses/>. */ /* Don't rely on this, the interface is currently messed up and may need to be broken to be fixed. */ #ifndef _SYS_UCONTEXT_H #define _SYS_UCONTEXT_H 1 #include &lt;features.h> #include &lt;bits/types/sigset_t.h> #include &lt;bits/types/stack_t.h> typedef unsigned long int __riscv_mc_gp_state[32]; #ifdef __USE_MISC # define NGREG 32 # define REG_PC 0 # define REG_RA 1 # define REG_SP 2 # define REG_TP 4 # define REG_S0 8 # define REG_S1 9 # define REG_A0 10 # define REG_S2 18 # define REG_NARGS 8 typedef unsigned long int greg_t; /* Container for all general registers. */ typedef __riscv_mc_gp_state gregset_t; /* Container for floating-point state. */ typedef union __riscv_mc_fp_state fpregset_t; #endif struct __riscv_mc_f_ext_state { unsigned int __f[32]; unsigned int __fcsr; }; struct __riscv_mc_d_ext_state { unsigned long long int __f[32]; unsigned int __fcsr; }; struct __riscv_mc_q_ext_state { unsigned long long int __f[64] __attribute__ ((__aligned__ (16))); unsigned int __fcsr; /* Reserved for expansion of sigcontext structure. Currently zeroed upon signal, and must be zero upon sigreturn. */ unsigned int __glibc_reserved[3]; }; union __riscv_mc_fp_state { struct __riscv_mc_f_ext_state __f; struct __riscv_mc_d_ext_state __d; struct __riscv_mc_q_ext_state __q; }; typedef struct mcontext_t { __riscv_mc_gp_state __gregs; union __riscv_mc_fp_state __fpregs; } mcontext_t; /* Userlevel context. */ typedef struct ucontext_t { unsigned long int __uc_flags; struct ucontext_t *uc_link; stack_t uc_stack; sigset_t uc_sigmask; /* There's some padding here to allow sigset_t to be expanded in the future. Though this is unlikely, other architectures put uc_sigmask at the end of this structure and explicitly state it can be expanded, so we didn't want to box ourselves in here. */ char __glibc_reserved[1024 / 8 - sizeof (sigset_t)]; /* We can't put uc_sigmask at the end of this structure because we need to be able to expand sigcontext in the future. For example, the vector ISA extension will almost certainly add ISA state. We want to ensure all user-visible ISA state can be saved and restored via a ucontext, so we're putting this at the end in order to allow for infinite extensibility. Since we know this will be extended and we assume sigset_t won't be extended an extreme amount, we're prioritizing this. */ mcontext_t uc_mcontext; } ucontext_t; #endif /* sys/ucontext.h */</p></div><footer class=entry-footer><span title='2024-03-15 11:30:03 +0000 UTC'>March 15, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;491 words&nbsp;·&nbsp;xyenchi</footer><a class=entry-link aria-label="post link to 继续移植gprofng" href=https://xyenchi.github.io/nonsence/%E7%BB%A7%E7%BB%AD%E7%A7%BB%E6%A4%8Dgprofng/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>参加玄铁大会</h2></header><div class=entry-content><p>早上到了深圳，参加玄铁大会。
拎着 sifive 的袋子走出地铁站被尚未面基过的群友观测到了，好好玩。
玄铁大会的会场有好多人参加，玄铁还很贴心地为大家准备了同传，虽然偶尔在听的时候截获到了一些翻译得不太对的地方。觉得同声传译真的很难，因为我对于 自己没有了解过的领域听中文都会觉得困难，他们还要去翻译自己不了解的领域。
中午和很多只在线上水群看到过的群友吃萨利亚，奶油蘑菇汤好喝，芝士焗饭太腻了，吃了几口就吃不下了。
本地热心群友帮助我找到警局办理了港澳通行证签注，万分感谢！
下午参观站台，有真能避障的小车车和人工智障 AI, 还体验了一下 openKylin 运行的小车车游戏的自动模式。
衷心祝愿 RISC-V 能发展地越来越好。耶！</p></div><footer class=entry-footer><span title='2024-03-14 11:30:03 +0000 UTC'>March 14, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;16 words&nbsp;·&nbsp;xyenchi</footer><a class=entry-link aria-label="post link to 参加玄铁大会" href=https://xyenchi.github.io/nonsence/%E5%8F%82%E5%8A%A0%E7%8E%84%E9%93%81%E5%A4%A7%E4%BC%9A/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>总结摘樱桃</h2></header><div class=entry-content><p>天气晴。
近日被摘樱桃此等琐事缠身无法日更。
起因是为 ruyisdk 的 gcc 12 支持 RISC-V。
经过非常曲折，大概重新摘了 3 遍。
第一遍简单在邮件列表根据关键词 RISC-V 按照时间来筛选 patch。
第一个问题是有作者commit tittle里面写riscv无法筛选出来。
第二个问题是邮件列表 patch 显示的时间不是按照 commit 生成时间而是根据 commit apply 时间。
第二遍根据关键词 riscv 来筛选 patch。 导致vector部分大量报错。
第三遍写了一个脚本：
https://github.com/XYenChi/EasyCherryPick
README写了用法和原理，日记中不再赘述。
虽然操作过程有重名问题导致误删了 patch ，但也还有一些和 Makefile、中端相关的问题。好在最后根据关键词搜 patch 都能解决。</p></div><footer class=entry-footer><span title='2024-03-11 11:30:03 +0000 UTC'>March 11, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;40 words&nbsp;·&nbsp;xyenchi</footer><a class=entry-link aria-label="post link to 总结摘樱桃" href=https://xyenchi.github.io/nonsence/%E6%80%BB%E7%BB%93%E6%91%98%E6%A8%B1%E6%A1%83/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>找到漏摘的樱桃</h2></header><div class=entry-content><p>天气雨 终于找到了摘樱桃出的问题，如果早一点切分支搜，很快就能找出来，不知道自己脑子里每天装的是什么水。 翻译推文的时候也是，命名觉得不对劲但是却不会去发现并修改。大脑不用可能真的会生锈，太恐怖了。</p></div><footer class=entry-footer><span title='2024-02-19 11:30:03 +0000 UTC'>February 19, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;3 words&nbsp;·&nbsp;xyenchi</footer><a class=entry-link aria-label="post link to 找到漏摘的樱桃" href=https://xyenchi.github.io/nonsence/20240219/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>2024开工大吉</h2></header><div class=entry-content><p>天气雨 虽然不管究竟是否开工大吉，肯定要嘴硬说一下开工大吉的。
继续解决 RVV machine mode 报错没有声明的问题。
研究了 Makefile.in genmodes.cc gengtype 等一系列文件没能发现什么问题。
现在开始怀疑 riscv 写的相关文件有问题了。</p></div><footer class=entry-footer><span title='2024-02-18 11:30:03 +0000 UTC'>February 18, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;15 words&nbsp;·&nbsp;xyenchi</footer><a class=entry-link aria-label="post link to 2024开工大吉" href=https://xyenchi.github.io/nonsence/20240218/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>给摘樱桃偷懒想办法</h2></header><div class=entry-content><p>天气雨 昨日和今日在想办法解决gcc自动构建的问题。
在 github CI上写首先面临着只能选择 gcc 仓库，因为 riscv-gnu-toolgitchain 的 gcc 是 submodule ，push commit 之后无法检测到 submodule 的更新自动跑。
其次面临的问题是拉取 riscv-gnu-toolchain 的 submodule 所有分支的时间消耗需要将近二十分钟。git cherry-pick commit 可能只需要二十秒。虽然可以用 git clone –depth=1 来解决，但是无法切换到我想要的release。 最重大的问题就是无法找到 gcc 12.3.0 的 ref 了，在尝试解决的途中发现了 ci 的每一次 step 都会回到初始的仓库路径。
发现只要我把自己仓库的 master 改成需要测试的代码就行。诶？ 最近每天都三四点睡，十一二点起。大脑开始刷cache，无端回忆起很多以前的事情。</p></div><footer class=entry-footer><span title='2024-02-02 11:30:03 +0000 UTC'>February 2, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;43 words&nbsp;·&nbsp;xyenchi</footer><a class=entry-link aria-label="post link to 给摘樱桃偷懒想办法" href=https://xyenchi.github.io/nonsence/20240202/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>继续摘樱桃</h2></header><div class=entry-content><p>天气雨
今日想找commit history的蛛丝马迹发现gcc12 release之前也有很多 riscv 相关patch不是打在gcc12上的。
翻车车。</p></div><footer class=entry-footer><span title='2024-01-31 11:30:03 +0000 UTC'>January 31, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;7 words&nbsp;·&nbsp;xyenchi</footer><a class=entry-link aria-label="post link to 继续摘樱桃" href=https://xyenchi.github.io/nonsence/20240131/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://xyenchi.github.io/nonsence/page/4/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://xyenchi.github.io/nonsence/page/6/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2026 <a href=https://xyenchi.github.io/>xyenchi's blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>